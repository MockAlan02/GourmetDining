<section class="reset-password-section">
    <img src="/img/brand.png" alt="Reset Password Image" class="img-fluid">
    <div class="reset-password-container">
        <h1>Reset Your Password</h1>
        <form id="resetPasswordForm" method="post" action="/login/newpasswordToken/{{this.token}}">
            <input type="password" id="newPassword" class="form-control mb-3" placeholder="New Password" name="password"
                required>
            <input type="password" id="confirmPassword" class="form-control mb-3" placeholder="Confirm Password"
                name="confirmPassword" required>
            <button type="submit" class="btn btn-primary mt-3">Reset Password</button>
        </form>
    </div>
</section>

<!-- Modal for Password Mismatch -->
<div class="modal fade" id="passwordMismatchModal" tabindex="-1" aria-labelledby="passwordMismatchLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="passwordMismatchLabel">Error</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Passwords do not match. Please try again.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Password Reset Success -->
<div class="modal fade" id="passwordResetSuccessModal" tabindex="-1" aria-labelledby="passwordResetSuccessLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="passwordResetSuccessLabel">Success!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Your password has been reset successfully. Click below to return to the homepage.
            </div>
            <div class="modal-footer">
                <a href="/" class="btn">Go to Homepage</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById('resetPasswordForm').addEventListener('submit', function (event) {
        event.preventDefault();
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (newPassword !== confirmPassword) {
            const passwordMismatchModal = new bootstrap.Modal(document.getElementById('passwordMismatchModal'));
            passwordMismatchModal.show();
        } else {
            const passwordResetSuccessModal = new bootstrap.Modal(document.getElementById('passwordResetSuccessModal'));
            passwordResetSuccessModal.show();
        }
    });
</script>